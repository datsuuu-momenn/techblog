# VSCode SSH 入門 – What / Why / How で理解する


もし、あなたがリモートサーバでの開発にちょっとした不便やストレスを感じているなら、  
このお話が少し役に立つかもしれません。

コードはリモートにあるのに、編集はローカルで、時にはファイルを行き来させたり、  
SSH ターミナルのコマンドを必死に覚えたり…  
そんな手間をぐっと減らし、もっと自然に作業できる方法があります。

それが **VSCode SSH**。  
まるで隣にあるパソコンに触れるように、リモートサーバの環境をそのまま手元に引き寄せてくれるツールです。  
編集もデバッグも、拡張機能の利用も、全部いつもの VSCode で。

このブログでは、

- **What** – VSCode SSH って何？
    
- **Why** – なぜ使うと便利なの？（図解つきで）
    
- **How** – どうやって始めるの？設定例も紹介
    

そんな流れで、お話ししていきます。

---
## 1. What – VSCode SSH とは何か

Visual Studio Code（VSCode）の **Remote - SSH** 機能は、SSH（Secure Shell）プロトコルを使ってリモートマシン（コンテナーなど）に接続し、その環境をローカルの VSCode 上で直接操作できる拡張機能です。  
通常、SSH はコマンドラインからリモートマシンへログインして使いますが、VSCode SSH を使うと **ファイル編集・ターミナル操作・デバッグ** などを GUI 上で一貫して行えます。

- **主な機能**
    
    - リモートファイルシステムの直接編集
        
    - リモートでのコード実行・デバッグ
        
    - VSCode 拡張機能のリモートインストール
        
    - ローカルと同じ UI でリモート環境を扱える
        

---

## 2. Why – なぜ使うのか

VSCode SSH が便利な理由は、主に **「ローカルと同じ作業感でリモート開発できる」** ことにあります。

### a. ローカルとリモートの環境差異を解消

ローカルでは再現が難しい環境（例：機械学習サーバ、本番に近い検証環境）をそのまま開発環境として利用できます。
> 	たとえば、ローカルのノートPCで大規模なデータ処理や機械学習モデルの学習を行おうとすると、  
> 	CPU は常に 100%、ファンは全力回転、バッテリーは急速に減ってしまいます。  
> 	一方、クラウドや社内の高性能サーバには、GPU や大容量メモリが備わり、  
> 	本番に近い検証環境や特殊なライブラリ構成もそろっています。
> 	
> 	VSCode SSH を使えば、こうしたリモート環境に直接つなぎ、  
> 	ローカルと同じ編集体験でコードを書き、その場で実行できます。  
> 	**「重い処理はサーバに任せ、手元では軽快に開発」** という理想的なワークフローが実現します。

### b. セキュアで柔軟なアクセス

SSH は暗号化通信を提供し、安全にリモートマシンへアクセス可能。VPN や踏み台サーバ経由の接続も容易です。
> 	たとえば、社外から社内ネットワークの開発サーバにアクセスする場合でも、  
> 	一度 VPN に接続し、踏み台サーバ（Bastion Host）経由での接続設定を作ってしまえば、  
> 	VSCode からはワンクリックで安全に入れます。  
 > 	鍵ファイルはローカルに保存され、パスワードを何度も入力する必要もなし。  
> 	社内・クラウド・オンプレミスなど、**あらゆる環境に安心して接続できる柔軟性**があります。
### c. 開発効率の向上

- **ローカル転送不要**：直接リモート上で編集・保存
> 	もう、`scp` や `rsync` でファイルを行き来させる必要はありません。  
> 	例えば、ログ解析や設定ファイルの変更も、保存した瞬間にリモート側へ反映されるので、 
> 	「編集 → 転送 → 上書き確認 → 再読み込み」という手間がゼロになります。  
> 	開発だけでなく、運用・保守作業の効率も大きく向上します。
    
- **UI 一貫性**：慣れた VSCode 環境で作業
> 	いつも使っている VSCode の見た目・操作感で作業できます。  
> 	ローカルと同じテーマやフォント、キーボードショートカット、拡張機能がそのまま使えるので、  
> 	vi や nano で迷子になることも、設定を一からやり直すこともありません。  
> 	まるで「自分の開発環境ごと」リモートに持ち込んだような安心感があります。
    
- **複数環境切替**：開発・ステージング・本番などを即切替
	> VSCode SSHを使えば、複数環境のコードレビューも一瞬できる。
	> 本番・ステージング・開発用と3つの環境を同時にチェックする必要があるとき、  
	> 従来ならそれぞれに SSH し直し、ディレクトリを探し、ファイルを開くという手順を何度も繰り返します。  
	> VSCode SSH を使えば、設定済みの接続先をワンクリックで切り替え可能。  
	> タブ感覚で環境を行き来できるため、**コードレビューや緊急対応が圧倒的に早くなります。**
    

---

### 図解1 – 基本的な接続構造

（draw.io で作成可能）

```
[ VSCode (Local PC) ]
        |
        | SSH (暗号化通信)
        v
[ リモート開発サーバ ]
```

---

### 図解2 – 踏み台サーバ経由の接続

```
[ VSCode (Local PC) ]
        |
        | SSH
        v
[ Bastion / 踏み台サーバ ]
        |
        | SSH
        v
[ リモート開発サーバ ]
```


## 3. How – 使い方


### 3.1 準備

1. **VSCode のインストール**
    
2. **拡張機能 Remote - SSH をインストール**  
    `Extensions` → 「Remote - SSH」で検索してインストール
    
3. **SSH クライアント設定**
    
    - macOS/Linux: 標準で SSH クライアントあり
        
    - Windows: OpenSSH クライアントを有効化
        

---

### 3.2 SSH config 実例

VSCode での接続設定は `~/.ssh/config` にまとめるのがおすすめです。  
以下は実際の例です。

```sshconfig
# 開発用サーバ
Host dev-server
    HostName dev.example.com
    User developer
    Port 22
    IdentityFile ~/.ssh/id_rsa

# 踏み台経由で接続するステージング環境
Host staging
    HostName staging.internal
    User developer
    ProxyJump bastion.example.com
    IdentityFile ~/.ssh/id_rsa

# AWS EC2 インスタンス
Host aws-ml
    HostName ec2-12-34-56-78.ap-northeast-1.compute.amazonaws.com
    User ubuntu
    IdentityFile ~/.ssh/aws-key.pem
```

これにより、VSCode の Remote-SSH から **`dev-server`** や **`staging`** と入力するだけで接続可能になります。

---

### 3.3 設定手順

1. コマンドパレット（`Ctrl+Shift+P` / `Cmd+Shift+P`）で **"Remote-SSH: Connect to Host"** を選択
    
2. 登録したホスト名（例: `dev-server`）を選ぶ
    
3. 初回接続時はリモートに VSCode Server がインストールされる
    
4. 接続後、VSCode 左下に **[SSH: hostname]** 表示が出れば成功
    


---

## 5. よくあるトラブルと対処

- **接続できない**
    
    - SSH ポート（通常 22）が開いているか確認
        
    - ネットワーク制限やファイアウォール設定をチェック
        
- **権限エラー**
    
    - `.ssh` ディレクトリと鍵ファイルのパーミッションを正しく設定  
        `chmod 700 ~/.ssh`  
        `chmod 600 ~/.ssh/id_rsa`
        
- **遅延やラグ**
    
    - ネットワーク経路を最適化
        
    - 不要な拡張機能を無効化
        

---

## 6. まとめ

VSCode SSH は、リモート開発をローカルと同じ感覚で行える強力なツールです。  
**安全・効率・快適** の三拍子が揃っており、クラウドサーバや社内開発環境との相性も抜群。  
特にサーバサイド開発や機械学習プロジェクトなど、リモート環境が前提のケースでは導入効果が大きいでしょう。
